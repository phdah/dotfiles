# Autocomplete in cli
autoload -Uz compinit
compinit

# Aliases
alias sudo='sudo ' # Allow to append users alias etc to sudo commands
alias pbcopy='xsel --clipboard --input'
alias pbpaste='xsel --clipboard --output'
alias ls='ls --color --sort=extension'
alias ll='ls --color -Al'
alias vim='nvim'
alias vfzf='nvim $(rg -l --hidden "" . | fzf)'
alias Vfzf='nvim $(rg -l --hidden "" ~ | fzf)'
alias nb='nvim ~/repos/privat/logbook/README.md'
alias open='xdg-open'
# Git alias
alias gitl='git log --oneline'
alias gits='git status'
alias gitp='git pull'
alias gitd='git diff'
alias gitb='git branch'
alias gitc='git checkout'

# Functions
function gitall() {
    git status && git add . && git commit -m "$1" && git push
}
function gitallremote() {
    git -C "$1" status && git -C "$1" add . && git -C $1 commit -m $2 && git -C "$1" push
}
function cat() {
    bat $1 --style=plain --paging=never
}
function rgf() {
    rg --files | rg $1
}
function sedall() {
    sed -i "s/$1/$2/g" $(rg $1 -l)
}
function sedtrailingspace() {
    sed -i 's/\s\+$//g' $(rg '' -l)
}

# Set Vim as default keymapping
ZVM_VI_ESCAPE_BINDKEY=^K
source /usr/share/zsh/plugins/zsh-vi-mode/zsh-vi-mode.plugin.zsh

# Set some vim command, to see keymaps run: bindkey
# Insert mode
bindkey -M viins ^X delete-char
bindkey -M viins ^B beginning-of-line
bindkey -M viins ^E end-of-line
# Normal mode
bindkey -M vicmd ^B beginning-of-line
bindkey -M vicmd ^E end-of-line

# TODO: fix clipboard yank and paste

# Path
source $HOME/.paths
# Envs
source $HOME/.envvar

### Set up prompt ###

# Keep 1000 lines of history within the shell and save it to ~/.zsh_history:
HISTSIZE=1000
SAVEHIST=1000
HISTFILE=$HOME/.zsh_history

# Show current git branch right of prompt
autoload -Uz vcs_info
precmd_vcs_info() { vcs_info }
precmd_functions+=( precmd_vcs_info )
setopt prompt_subst
zstyle ':vcs_info:git:*' formats '%b'

# Prompt definition
NEWLINE=$'\n'
PROMPT="%F{#D08770}%B%~${NEWLINE}%%%b "
RPROMPT='${vcs_info_msg_0_}'

# Syntax highligthing
source /usr/share/zsh/plugins/fast-syntax-highlighting/fast-syntax-highlighting.plugin.zsh

export EDITOR=$(which nvim)

# Set default fzf stdout
export FZF_DEFAULT_COMMAND='rg --hidden -l ""'
